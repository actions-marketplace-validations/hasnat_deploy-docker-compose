name: 'Deploy docker-compose'
author: '@hasnat'
branding:
  icon: 'package'
  color: 'gray-dark'
description: 'GitHub Actions for Docker actions'

inputs:
  token:
    description: 'repo access token'
    required: true
  repository:
    description: 'Repo to deploy'
    required: true
  branch:
    description: 'Repo branch'
    required: false
  deploy-to:
    description: 'Server to deploy to'
    required: false
  compose-folder:
    description: 'Use dockerfile when you would like to explicitly build a Dockerfile'
    required: false
  project-name:
    description: 'Use workdir when you would like to change the directory for building'
    required: false
  build-args:
    description: 'Use buildargs when you want to pass a list of environment variables as build-args'
    required: false

outputs:
  tag:
    description: 'Is the tag, which was pushed'
  snapshot-tag:
    description: 'Is the tag that is generated by the snapshot-option and pushed'
  digest:
    description: 'Is the digest of the image, which was pushed'

runs:
  using: 'docker'
  image: 'Dockerfile'
  args:
    - ${{ inputs.token }}
    - ${{ inputs.repository }}
    - ${{ inputs.branch }}
    - ${{ inputs.deploy-to }}
    - ${{ inputs.compose-folder }}
    - ${{ inputs.project-name }}
    - ${{ inputs.dockerfile }}
    - ${{ inputs.build-args }}